apic_connect:
  preface: Escape character is '^]'.
  prompt: ""
  commands:
    "":
      new_state: apic_exec


apic_exec:
  prompt: APC#
  commands: &exec_commands
    "show firmware upgrade status": |
      \r\r\n ID Pod ID Name Serial Number IP Address Role State LastUpdMsgId\r\n
      -------------------------------------------------------------------------------------
      \r\n 101 1 reg2_leaf1 FDO241909ZG 10.0.120.64/32 leaf active 0\r\n 102 1 reg2_leaf2 
      FDO20510HAS 10.0.120.66/32 leaf active 0\r\n 201 1 reg2_spine1 FDO26450SH4 10.0.120.65/32 spine 
      active 0\r\n\r\nTotal 3 nodes\r\n\r\n%
    "terminal length 0": ""
    "terminal width 0": ""
    "show version": |2
       Role        Pod         Node        Name                      Version              
       ----------  ----------  ----------  ------------------------  -------------------- 
       controller  1           1           APC-0001-2001             3.2(2l)              
       spine       1           1101        SPI-1101-1790             n9000-13.2(2l)       
       spine       1           1102        SPI-1102-1800             n9000-13.2(2l)       
       leaf        1           3101        LEA-3101-1791             n9000-13.2(2l)       
       leaf        1           3102        LEA-3102-1801             n9000-13.2(2l)       
       leaf        1           3107        LEA-3107-1681             n9000-13.2(2l)       
       leaf        1           3108        LEA-3108-1671             n9000-13.2(2l)       
    "acidiag reboot":
      new_state: apic_restart_confirm
    "configure":
      new_state: apic_config
    "invalid command": "Error: Invalid argument 'invalid command '. Please check syntax in command reference guide"

apic_exec_ssh:
  prompt: APC#
  commands:
    <<: *exec_commands
    "acidiag reboot":
      new_state: apic_restart_confirm_ssh


apic_hostname_with_escape_codes:
  prompt: "%1B[0m%1B[27m%1B[24m%1B[JAPC-0001-2001# "
  commands: *exec_commands

apic_hostname_with_escape_codes2:
  prompt: "\x1b[0m\x00\x00\x1b[m\x00\x00\x1b[m\x00\x00\x1b[J\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00apic1# \x1b[K\x00\x00\x00\x1b[?1h\x1b=\x1b[?2004h"
  commands: *exec_commands


apic_restart_confirm:
  prompt: "This command will restart this device, Proceed? [y/N] "
  commands:
    "y":
      response: file|mock_data/apic/apic_reboot.txt
      timing:
        - 0:,0,0.001
      new_state: apic_login


apic_restart_confirm_ssh:
  prompt: "This command will restart this device, Proceed? [y/N] "
  commands:
    "y":
      response: Connection to 127.0.0.1 closed
      new_state: apic_exec_ssh


apic_login:
  prompt: "APC login: "
  commands:
    "admin":
      new_state: apic_password

apic_password:
  prompt: "Password: "
  commands:
    "cisco123":
      new_state: apic_exec

apic_ssh_password:
  preface: |
    Application Policy Infrastructure Controller
  prompt: "admin@2001:dead:beef::1's password:"
  commands:
    "cisco123":
      new_state: apic_exec

apic_config:
  prompt: APC(config)#
  commands: 
    "tenant test":
      new_state: apic_config_tenant
    "switch-group": "\x1b[K\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1b[1C\x1b[?1l\x1b>\x1b[?2004l\r\r\nError: Invalid argument ''. Please check syntax in command reference guide\r\n\x1b[1m\x00\x00\x00\x00\x00\x00\x00\x00\x1b[7m\x00\x00\x00\x00\x00\x00\x00\x00%\x1b[m\x00\x00\x00\x00\x00\x00\x00\x00\x1b[1m\x00\x00\x00\x00\x00\x00\x00\x00\x1b[0m\x00\x00\x00\x00\x00\x00\x00\x00 \r \r\r\x1b[0m\x00\x00\x00\x00\x00\x00\x00\x00\x1b[m\x00\x00\x00\x00\x00\x00\x00\x00\x1b[m\x00\x00\x00\x00\x00\x00\x00\x00\x1b[J\x00"
    "end":
      new_state: apic_exec

apic_config_tenant:
  prompt: APC(config-tenant)#
  commands: 
    "end":
      new_state: apic_exec

apic_shell_connect:
  preface: |
    Application Policy Infrastructure Controller
  prompt: "root@10.197.154.122's password: "
  commands:
    "cisco":
      new_state: apic_shell

apic_shell:
  prompt: "[root@APC ~]# "
  commands:
    "pwd": |
      /root
